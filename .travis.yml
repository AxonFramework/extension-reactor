# We want to run this on Ubuntu 18.04 LTS
dist: bionic

language: java

sudo: required

services:
  - docker

jobs:
  include:
    - name: "JDK 8"
      jdk: openjdk8
      env: MVN_BUILD_SCRIPT="clean verify"
    - name: "JDK 11 with Sonar analysis"
      jdk: openjdk11
      env: MVN_BUILD_SCRIPT="-Pcoverage clean verify sonar:sonar -Dsonar.projectKey=AxonFramework_extension-reactor"

install: true

cache:
  directories:
    - $HOME/.m2

# We switch JDK by setting the JAVA_HOME environment variable. All JDKs are under the same base directory.
script:
  - mvn -version
  - mvn -B -U $MVN_BUILD_SCRIPT

notifications:
  slack:
    secure: d1HN9GBeH0e6EsHjNkPVXgBaFCYqbvjkZv9GUkpWnyjNYP5V1snSk6sO4X6ONttydgzfbElZTOfrgDzRTgWJ76iDMxAPccFPY7dmGcpw8/2TOjwP6H6yEitiiZcWR9fssTM2Li2WQtuGkwaVBhw15JNABzEsexxqXC+Cu48yUfA=

addons:
  sonarcloud:
    organization: "axonframework"
    token:
      secure: "dKsy2ygnMDZBia/UeNg96JWj2XolCkZxNHi/oSho3VscYcyW3A+an4wxQ/hHde7ULrGdRS81XNtmvVFPc5e/EylffBjIVUsiwu5RU61FMjZ+12ldMblbl42ELEZ0qPoDYbXdolmcSxVy/czOHOCYyhe+KEWcW/8O9xTHdxP2JjxAGeUlDt50Oq1AHn75bu42hjDCYUwivvlMGRtm48O0HhFWqLfXRS0+d+Kd7p8XLPEmzGbVbjx1Aaa0sHXXnRQaACGoQbrocP7O7Egz7NdryC/6KZgVvOzqAfkyToBrG5Ccdnwqz4N3cOKcYG84SiJCQWhqpk98ehhMsUi8VILi3C0ihrFbtI8fAqZHEgXc0WCJw6sBSaZppcbgK6TDqST2xDLSlSR+SksVcHQtZTl6mne3HPt4o7zU/U0mssox49tp5ZtO9dsMiBTAuivOdZMX060fwakjrHI0T1Xl9XTgKZl3RgVZD+CVCf7othwn7+4LwESjGDiZwbh5voWruKNgrIPqYQ/YFdkJlvZ3lXVlz5kJspp4/HiBEs9tYgW8/4yZgZX1Z3rA6UQnl6anwCZIEv1Y/qbnzbcAOxjyE8As2uHzhn6wD2y3KMIiH1irD2HSb9KParrS3isftytsybIDlWcVkyzhdNeGNHCJdxV1afcvBsP3BDpZ5zUG6STj+KM="
