# We want to run this on Ubuntu 18.04 LTS
dist: bionic

language: java

sudo: required

services:
  - docker

jobs:
  include:
    - name: "JDK 8"
      jdk: openjdk8
      env: MVN_BUILD_SCRIPT="clean verify"
    - name: "JDK 11 with Sonar analysis"
      jdk: openjdk11
      env: MVN_BUILD_SCRIPT="-Pcoverage clean verify sonar:sonar -Dsonar.projectKey=AxonFramework_extension-reactor"

install: true

cache:
  directories:
    - $HOME/.m2

# We switch JDK by setting the JAVA_HOME environment variable. All JDKs are under the same base directory.
script:
  - mvn -version
  - mvn -B -U $MVN_BUILD_SCRIPT

notifications:
  slack:
    secure: d1HN9GBeH0e6EsHjNkPVXgBaFCYqbvjkZv9GUkpWnyjNYP5V1snSk6sO4X6ONttydgzfbElZTOfrgDzRTgWJ76iDMxAPccFPY7dmGcpw8/2TOjwP6H6yEitiiZcWR9fssTM2Li2WQtuGkwaVBhw15JNABzEsexxqXC+Cu48yUfA=

addons:
  sonarcloud:
    organization: "axonframework"
    token:
      secure: "JD6zhqgYM3VK06JRRQmd3CwHJoJ3d33/AvYhNlLkvlpDye8Bmr7r8W0kMWr+Sch5FPTvq7ihO7UybAuH6OTrS9LvhqBZnY85s0C1WKEdTggOARETGhvMBfoNqu94vzi1J9usa11u/xuTzR8rLpscm77TQ+0DMj+sD0VzxNQI26wG1RZRqhUl6SOXeKwEccR5iNuLYKVrk7HAr3OVSiy0Xn6/6inHpkdgLBYCFFLp++7fZNzXQjGOtAc9GDmMmNaaQfQaDhX2inNe73X6axE+yzBxfD42WWIWYJmYNsXQciNtE1ODMf75w4JW8+YUY47UPZdIFbV0tQxgBQx8o8KgIz4bBrTUcd5cBNq//SBoE0tAXgjWXzhvIcpS43HS8tyUkXj2caTX+awUyOmr2m+5ENu3wiCLYidI9KSiqulhMVNPzaNM5EoCNqGZxqhZJD22lqQl0eBlR+VnWI7STpkBs1oBoPTyhjex/9m2Pv6yWjjDSn/gSBxnkGDUfSZ74YFrXMRVGQemiMbVyZ9G6QqqbbZrVmdlFj0Jmfrz+YXXnwLYlxV6dn6rpMMQAtM1ASnSNdLVitQdcozEOS8FmULifhG4XvLWSabuV24DzIfcT6PLqNmVnPfhTSf5giQdB1BsmyzR2rKQlGrNLyN1kHU4yN9iK7e1+dzsvK77L1lszOU="
